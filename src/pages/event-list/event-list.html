<ion-header>
  <ion-navbar>
    <ion-buttons start>
      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title>Events</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="onNewEvent()">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>

  </ion-navbar>

</ion-header>

<ion-content padding>
  <ion-list>
    <ion-card *ngFor="let event of events" >

      <ion-item (click)="goToEventDetail(event?.$key)">
        <h2>{{event?.name}}</h2>
        <p><strong>{{event?.where}}</strong></p>
        <p><strong>{{event?.when}}</strong></p>
      </ion-item>

      <ion-card-content>
        <p>{{event?.description}}</p>
      </ion-card-content>

      <ion-row>
        <ion-col>
          <button
            ion-button
            icon-left
            clear
            small
            (click)="onAddLike(event?.$key)"
            *ngIf="!event?.isLiked">
            <ion-icon name="thumbs-up-outline"></ion-icon>
            <label>{{event?.likes}}</label>
          </button>
          <button
            ion-button
            icon-left
            clear
            small
            color="danger"
            (click)="onRemoveLike(event?.$key)"
            *ngIf="event?.isLiked">
            <ion-icon name="thumbs-up"></ion-icon>
            <label>{{event?.likes}}</label>
          </button>

        </ion-col>
        <ion-col>
          <button ion-button icon-left clear small>
            <ion-icon name="chatbubbles"></ion-icon>
            <!--<div>{{(event.isLiked | async)?.on==null}}</div>-->
            <!--<div>{{event?.$key}}</div>-->
            <div>2</div>
          </button>
        </ion-col>
        <ion-col>
          <button ion-button
                  icon-left clear small
                  color="secondary"
                  (click)="goToEventAttendees(event?.$key)">
            <!--<ion-icon name="people" *ngIf="getAttendanceCount(event.id)>0"></ion-icon>-->
            <ion-icon name="people"></ion-icon>
            <label>{{event?.attendeesCount}}</label>
          </button>
        </ion-col>
        <!--<ion-col center text-center>-->
          <!--<ion-note>-->
            <!--11h ago-->
          <!--</ion-note>-->
        <!--</ion-col>-->
      </ion-row>

    </ion-card>
  </ion-list>
</ion-content>
